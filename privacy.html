<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Privacy Policy - 241Runners Awareness</title>
  <link rel="stylesheet" href="styles.css?v=20250905" />
  <style>
    .legal-container {
      max-width: 800px;
      margin: 2rem auto;
      padding: 2rem;
      background: #ffffff;
      border-radius: 12px;
      box-shadow: 0 4px 24px rgba(0,0,0,0.13);
      line-height: 1.6;
    }

    .legal-container h1 {
      color: #dc2626;
      border-bottom: 2px solid #dc2626;
      padding-bottom: 0.5rem;
      margin-bottom: 2rem;
    }

    .legal-container h2 {
      color: #374151;
      margin-top: 2rem;
      margin-bottom: 1rem;
      font-size: 1.25rem;
    }

    .legal-container h3 {
      color: #4b5563;
      margin-top: 1.5rem;
      margin-bottom: 0.5rem;
      font-size: 1.1rem;
    }

    .legal-container p {
      margin-bottom: 1rem;
      color: #374151;
    }

    .legal-container ul {
      margin-bottom: 1rem;
      padding-left: 2rem;
    }

    .legal-container li {
      margin-bottom: 0.5rem;
      color: #374151;
    }

    .legal-container .last-updated {
      background: #f3f4f6;
      padding: 1rem;
      border-radius: 8px;
      margin-bottom: 2rem;
      border-left: 4px solid #dc2626;
    }

    .back-btn {
      display: inline-block;
      margin: 1rem 0 0 0;
      background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      text-decoration: none;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(220, 38, 38, 0.3);
    }

    .back-btn:hover {
      background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);
    }

    /* Data Action Buttons */
    .data-actions {
      display: flex;
      gap: 1rem;
      margin: 2rem 0;
      flex-wrap: wrap;
    }

    .data-action-btn {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1.5rem;
      border: 2px solid #e5e7eb;
      border-radius: 12px;
      background: #ffffff;
      cursor: pointer;
      transition: all 0.3s ease;
      min-width: 280px;
      flex: 1;
    }

    .data-action-btn:hover {
      border-color: #dc2626;
      box-shadow: 0 4px 12px rgba(220, 38, 38, 0.15);
      transform: translateY(-2px);
    }

    .delete-data-btn:hover {
      border-color: #f59e0b;
      box-shadow: 0 4px 12px rgba(245, 158, 11, 0.15);
    }

    .delete-account-btn:hover {
      border-color: #dc2626;
      box-shadow: 0 4px 12px rgba(220, 38, 38, 0.15);
    }

    .btn-icon {
      font-size: 2rem;
      flex-shrink: 0;
    }

    .btn-content {
      text-align: left;
    }

    .btn-content strong {
      display: block;
      color: #374151;
      font-size: 1.1rem;
      margin-bottom: 0.25rem;
    }

    .btn-content small {
      color: #6b7280;
      font-size: 0.9rem;
    }

    /* Modal Styles */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 1000;
    }

    .modal-content {
      background-color: white;
      margin: 5% auto;
      padding: 0;
      border-radius: 12px;
      width: 90%;
      max-width: 600px;
      max-height: 80vh;
      overflow-y: auto;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      animation: modalSlideIn 0.3s ease;
    }

    @keyframes modalSlideIn {
      from {
        transform: translateY(-50px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .modal-header {
      background: linear-gradient(135deg, #dc2626, #991b1b);
      color: white;
      padding: 1.5rem;
      border-radius: 12px 12px 0 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .modal-header h2 {
      margin: 0;
      font-size: 1.5rem;
      font-weight: 600;
    }

    .modal-close {
      background: none;
      border: none;
      color: white;
      font-size: 2rem;
      cursor: pointer;
      padding: 0;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: background-color 0.3s ease;
    }

    .modal-close:hover {
      background-color: rgba(255, 255, 255, 0.2);
    }

    .modal-body {
      padding: 2rem;
    }

    .modal-footer {
      padding: 1.5rem 2rem;
      background-color: #f8f9fa;
      border-radius: 0 0 12px 12px;
      display: flex;
      gap: 1rem;
      justify-content: flex-end;
    }

    .btn {
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .btn-secondary {
      background-color: #6b7280;
      color: white;
    }

    .btn-secondary:hover {
      background-color: #4b5563;
    }

    .btn-danger {
      background-color: #dc2626;
      color: white;
    }

    .btn-danger:hover {
      background-color: #b91c1c;
    }

    .warning-box {
      background-color: #fef2f2;
      border: 1px solid #fecaca;
      border-radius: 8px;
      padding: 1rem;
      margin: 1rem 0;
    }

    .warning-box h4 {
      color: #dc2626;
      margin: 0 0 0.5rem 0;
    }

    .warning-box ul {
      margin: 0;
      padding-left: 1.5rem;
    }

    .warning-box li {
      color: #374151;
      margin-bottom: 0.25rem;
    }

    .data-type-list {
      background-color: #f9fafb;
      border-radius: 8px;
      padding: 1rem;
      margin: 1rem 0;
    }

    .data-type-list h4 {
      margin: 0 0 1rem 0;
      color: #374151;
    }

    .checkbox-group {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 0.5rem;
    }

    .checkbox-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .checkbox-item input[type="checkbox"] {
      margin: 0;
    }

    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: #374151;
    }

    .form-group textarea {
      width: 100%;
      padding: 0.75rem;
      border: 1px solid #d1d5db;
      border-radius: 8px;
      font-size: 1rem;
      resize: vertical;
      min-height: 100px;
    }

    @media (max-width: 768px) {
      .legal-container {
        margin: 1rem;
        padding: 1.5rem;
      }

      .data-actions {
        flex-direction: column;
      }

      .data-action-btn {
        min-width: auto;
      }

      .modal-content {
        width: 95%;
        margin: 10% auto;
      }

      .modal-header, .modal-body, .modal-footer {
        padding: 1rem;
      }

      .checkbox-group {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="header">Privacy Policy</div>
  <a href="/" class="back-btn">&larr; Back to Home</a>
  
  <div class="legal-container">
    <div class="last-updated">
      <strong>Last Updated:</strong> January 2025<br>
      <strong>Apple App Store Compliance:</strong> Updated to address Guideline 4.8 - Login Services requirements
    </div>

    <h1>Privacy Policy</h1>
    
    <p>241Runners Awareness ("we," "our," or "us") is committed to protecting the privacy and security of your personal information. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our website and services.</p>

    <h2>1. Information We Collect</h2>
    
    <h3>Personal Information</h3>
    <p>We may collect the following personal information:</p>
    <ul>
      <li>Name, email address, and phone number</li>
      <li>Role information (User, Parent, Caregiver, ABA Therapist, Admin)</li>
      <li>Address and location information</li>
      <li>Emergency contact information</li>
      <li>Runner/Individual information including photos and biometric data</li>
      <li>Authentication credentials and 2FA information</li>
    </ul>

    <h3>Technical Information</h3>
    <p>We automatically collect certain technical information:</p>
    <ul>
      <li>IP address and device information</li>
      <li>Browser type and version</li>
      <li>Usage patterns and interaction data</li>
      <li>Cookies and similar tracking technologies</li>
    </ul>

    <h2>2. How We Use Your Information</h2>
    <p>We use your information for the following purposes:</p>
    <ul>
      <li>Provide and maintain our services</li>
      <li>Process registrations and manage user accounts</li>
      <li>Send important notifications and updates</li>
      <li>Verify identity and prevent fraud</li>
      <li>Support missing person cases and recovery efforts</li>
      <li>Comply with legal obligations</li>
      <li>Improve our services and user experience</li>
    </ul>

    <h3>Advertising and Marketing</h3>
    <p><strong>We do not use your personal information for advertising purposes without your explicit consent.</strong> We do not track your interactions with the app for advertising, and we do not share your personal data with third-party advertisers. Any marketing communications will be clearly identified and can be opted out of at any time.</p>

    <h2>3. Information Sharing and Disclosure</h2>
    <p>We may share your information in the following circumstances:</p>
    <ul>
      <li><strong>With Law Enforcement:</strong> When required by law or to assist in missing person cases</li>
      <li><strong>With Emergency Contacts:</strong> When necessary for safety and recovery efforts</li>
      <li><strong>With Service Providers:</strong> Who help us operate our services (hosting, email, SMS)</li>
      <li><strong>With Your Consent:</strong> When you explicitly authorize sharing</li>
    </ul>

    <h2>4. Data Security</h2>
    <p>We implement appropriate security measures to protect your information:</p>
    <ul>
      <li>Encryption of sensitive data in transit and at rest</li>
      <li>Multi-factor authentication for account access</li>
      <li>Regular security audits and updates</li>
      <li>Limited access to personal information on a need-to-know basis</li>
      <li>Secure data centers and cloud infrastructure</li>
    </ul>

    <h2>5. Data Retention</h2>
    <p>We retain your information for as long as necessary to:</p>
    <ul>
      <li>Provide our services</li>
      <li>Comply with legal obligations</li>
      <li>Resolve disputes and enforce agreements</li>
      <li>Support ongoing missing person cases</li>
    </ul>

    <h2>6. Your Rights and Choices</h2>
    <p>You have the following rights regarding your personal information:</p>
    <ul>
      <li><strong>Access:</strong> Request a copy of your personal information</li>
      <li><strong>Correction:</strong> Update or correct inaccurate information</li>
      <li><strong>Deletion:</strong> Request deletion of your information (subject to legal requirements)</li>
      <li><strong>Portability:</strong> Request transfer of your data to another service</li>
      <li><strong>Opt-out:</strong> Unsubscribe from non-essential communications</li>
    </ul>

    <h3>Data Management Actions</h3>
    <div class="data-actions">
      <button class="data-action-btn delete-data-btn" onclick="openDeleteDataModal()">
        <span class="btn-icon">🗑️</span>
        <div class="btn-content">
          <strong>Delete My Data</strong>
          <small>Remove specific data while keeping your account</small>
        </div>
      </button>
      
      <button class="data-action-btn delete-account-btn" onclick="openDeleteAccountModal()">
        <span class="btn-icon">⚠️</span>
        <div class="btn-content">
          <strong>Delete My Account</strong>
          <small>Permanently delete your account and all data</small>
        </div>
      </button>
    </div>

    <h2>7. Cookies and Tracking</h2>
    <p>We use cookies and similar technologies to:</p>
    <ul>
      <li>Remember your preferences and settings</li>
      <li>Analyze website usage and performance</li>
      <li>Provide personalized content and features</li>
      <li>Ensure security and prevent fraud</li>
    </ul>

    <h3>No Advertising Tracking</h3>
    <p><strong>We do not use cookies or tracking technologies for advertising purposes.</strong> Any analytics data we collect is used solely to improve our services and is not shared with third-party advertisers or used for targeted advertising.</p>

    <h2>8. Third-Party Services and Login Options</h2>
    <p>We may use third-party services that collect information:</p>
    <ul>
      <li><strong>Google OAuth:</strong> For authentication and login (collects name and email only)</li>
      <li><strong>SendGrid:</strong> For email communications</li>
      <li><strong>Twilio:</strong> For SMS verification</li>
      <li><strong>Netlify:</strong> For website hosting and analytics</li>
    </ul>

    <h3>Login Services Privacy Compliance</h3>
    <p>In compliance with Apple App Store guidelines, our login services meet the following privacy requirements:</p>
    <ul>
      <li><strong>Limited Data Collection:</strong> Our login services only collect your name and email address</li>
      <li><strong>Email Privacy:</strong> You can choose to keep your email address private from all parties during account setup</li>
      <li><strong>No Advertising Data:</strong> We do not collect your interactions with the app for advertising purposes without your explicit consent</li>
      <li><strong>Sign in with Apple:</strong> We offer Sign in with Apple as an alternative login option that provides enhanced privacy protection</li>
    </ul>

    <h2>9. Children's Privacy</h2>
    <p>Our services are not intended for children under 13. We do not knowingly collect personal information from children under 13. If you believe we have collected such information, please contact us immediately.</p>

    <h2>10. International Data Transfers</h2>
    <p>Your information may be transferred to and processed in countries other than your own. We ensure appropriate safeguards are in place to protect your information in accordance with this Privacy Policy.</p>

    <h2>11. Changes to This Policy</h2>
    <p>We may update this Privacy Policy from time to time. We will notify you of any material changes by:</p>
    <ul>
      <li>Posting the updated policy on our website</li>
      <li>Sending email notifications to registered users</li>
      <li>Updating the "Last Updated" date</li>
    </ul>

    <h2>12. Contact Us</h2>
    <p>If you have questions about this Privacy Policy or our data practices, please contact us:</p>
    <ul>
      <li><strong>Email:</strong> privacy@241runnersawareness.org</li>
      <li><strong>Phone:</strong> [Contact number to be provided]</li>
      <li><strong>Address:</strong> [Mailing address to be provided]</li>
    </ul>

    <h2>13. HIPAA Compliance</h2>
    <p>While we are not a covered entity under HIPAA, we understand the sensitive nature of the information we handle and implement appropriate safeguards to protect personal health information and other sensitive data in accordance with best practices and applicable laws.</p>

    <p><em>This Privacy Policy is effective as of January 2025 and applies to all users of 241Runners Awareness services.</em></p>
  </div>

  <!-- Delete Data Modal -->
  <div id="deleteDataModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>🗑️ Delete My Data</h2>
        <button class="modal-close" onclick="closeDeleteDataModal()">&times;</button>
      </div>
      <div class="modal-body">
        <p>Select the specific data you want to delete while keeping your account active:</p>
        
        <div class="data-type-list">
          <h4>Data Types</h4>
          <div class="checkbox-group">
            <div class="checkbox-item">
              <input type="checkbox" id="delete-profile" value="profile">
              <label for="delete-profile">Profile Information</label>
            </div>
            <div class="checkbox-item">
              <input type="checkbox" id="delete-cases" value="cases">
              <label for="delete-cases">My Cases & Reports</label>
            </div>
            <div class="checkbox-item">
              <input type="checkbox" id="delete-notifications" value="notifications">
              <label for="delete-notifications">Notification History</label>
            </div>
            <div class="checkbox-item">
              <input type="checkbox" id="delete-location" value="location">
              <label for="delete-location">Location History</label>
            </div>
            <div class="checkbox-item">
              <input type="checkbox" id="delete-messages" value="messages">
              <label for="delete-messages">Messages & Communications</label>
            </div>
            <div class="checkbox-item">
              <input type="checkbox" id="delete-preferences" value="preferences">
              <label for="delete-preferences">App Preferences & Settings</label>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="deleteReason">Reason for deletion (optional):</label>
          <textarea id="deleteReason" placeholder="Please let us know why you're deleting this data so we can improve our service..."></textarea>
        </div>

        <div class="warning-box">
          <h4>⚠️ Important Information</h4>
          <ul>
            <li>This action cannot be undone</li>
            <li>Your account will remain active</li>
            <li>Some data may be retained for legal compliance</li>
            <li>Processing may take up to 30 days</li>
          </ul>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeDeleteDataModal()">Cancel</button>
        <button class="btn btn-danger" onclick="confirmDeleteData()">Delete Selected Data</button>
      </div>
    </div>
  </div>

  <!-- Delete Account Modal -->
  <div id="deleteAccountModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>⚠️ Delete My Account</h2>
        <button class="modal-close" onclick="closeDeleteAccountModal()">&times;</button>
      </div>
      <div class="modal-body">
        <p><strong>This will permanently delete your account and all associated data.</strong></p>
        
        <div class="warning-box">
          <h4>🚨 WARNING: This action is irreversible!</h4>
          <ul>
            <li>Your account will be permanently deleted</li>
            <li>All your data will be removed from our systems</li>
            <li>You will lose access to all cases and reports</li>
            <li>This cannot be undone</li>
          </ul>
        </div>

        <div class="form-group">
          <label for="accountDeleteReason">Reason for account deletion (optional):</label>
          <textarea id="accountDeleteReason" placeholder="Please let us know why you're deleting your account so we can improve our service..."></textarea>
        </div>

        <div class="form-group">
          <label for="confirmEmail">Enter your email address to confirm:</label>
          <input type="email" id="confirmEmail" placeholder="your.email@example.com" style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 8px; font-size: 1rem;">
        </div>

        <div class="form-group">
          <label>
            <input type="checkbox" id="confirmDeletion" style="margin-right: 0.5rem;">
            I understand that this action is permanent and cannot be undone
          </label>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeDeleteAccountModal()">Cancel</button>
        <button class="btn btn-danger" onclick="confirmDeleteAccount()" id="deleteAccountBtn" disabled>Delete My Account</button>
      </div>
    </div>
  </div>

  <script>
    // Auth utilities
    function authHeader() {
      const token = localStorage.getItem('ra_admin_token') || localStorage.getItem('ra_token');
      return token ? { 'Authorization': `Bearer ${token}` } : {};
    }

    function showToast(message, type = 'info') {
      // Create toast notification
      const toast = document.createElement('div');
      toast.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${type === 'success' ? '#10b981' : type === 'error' ? '#ef4444' : '#3b82f6'};
        color: white;
        padding: 1rem 1.5rem;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        z-index: 1001;
        font-weight: 500;
        max-width: 400px;
        animation: slideInRight 0.3s ease;
      `;
      toast.textContent = message;
      document.body.appendChild(toast);

      setTimeout(() => {
        toast.style.animation = 'slideOutRight 0.3s ease';
        setTimeout(() => document.body.removeChild(toast), 300);
      }, 5000);
    }

    // Delete Data Modal Functions
    function openDeleteDataModal() {
      document.getElementById('deleteDataModal').style.display = 'block';
    }

    function closeDeleteDataModal() {
      document.getElementById('deleteDataModal').style.display = 'none';
      // Reset form
      document.querySelectorAll('#deleteDataModal input[type="checkbox"]').forEach(cb => cb.checked = false);
      document.getElementById('deleteReason').value = '';
    }

    function confirmDeleteData() {
      const selectedData = Array.from(document.querySelectorAll('#deleteDataModal input[type="checkbox"]:checked'))
        .map(cb => cb.value);
      
      if (selectedData.length === 0) {
        showToast('Please select at least one data type to delete', 'error');
        return;
      }

      const reason = document.getElementById('deleteReason').value;

      // Show confirmation
      if (!confirm(`Are you sure you want to delete the following data?\n\n• ${selectedData.join('\n• ')}\n\nThis action cannot be undone.`)) {
        return;
      }

      // Make API call
      fetch('/api/users/delete-data', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          ...authHeader()
        },
        body: JSON.stringify({
          dataTypes: selectedData,
          reason: reason
        })
      })
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          showToast('Data deletion request submitted successfully', 'success');
          closeDeleteDataModal();
        } else {
          showToast(data.message || 'Failed to submit deletion request', 'error');
        }
      })
      .catch(error => {
        console.error('Error:', error);
        showToast('An error occurred. Please try again.', 'error');
      });
    }

    // Delete Account Modal Functions
    function openDeleteAccountModal() {
      document.getElementById('deleteAccountModal').style.display = 'block';
    }

    function closeDeleteAccountModal() {
      document.getElementById('deleteAccountModal').style.display = 'none';
      // Reset form
      document.getElementById('accountDeleteReason').value = '';
      document.getElementById('confirmEmail').value = '';
      document.getElementById('confirmDeletion').checked = false;
      document.getElementById('deleteAccountBtn').disabled = true;
    }

    function confirmDeleteAccount() {
      const email = document.getElementById('confirmEmail').value;
      const reason = document.getElementById('accountDeleteReason').value;
      const confirmed = document.getElementById('confirmDeletion').checked;

      if (!email) {
        showToast('Please enter your email address to confirm', 'error');
        return;
      }

      if (!confirmed) {
        showToast('Please confirm that you understand this action is permanent', 'error');
        return;
      }

      // Show final confirmation
      if (!confirm('FINAL WARNING: This will permanently delete your account and all data. This cannot be undone. Are you absolutely sure?')) {
        return;
      }

      // Make API call
      fetch('/api/users/delete-account', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          ...authHeader()
        },
        body: JSON.stringify({
          email: email,
          reason: reason
        })
      })
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          showToast('Account deletion request submitted successfully', 'success');
          // Clear local storage and redirect
          setTimeout(() => {
            localStorage.clear();
            window.location.href = '/';
          }, 2000);
        } else {
          showToast(data.message || 'Failed to submit account deletion request', 'error');
        }
      })
      .catch(error => {
        console.error('Error:', error);
        showToast('An error occurred. Please try again.', 'error');
      });
    }

    // Enable delete account button when checkbox is checked
    document.getElementById('confirmDeletion').addEventListener('change', function() {
      document.getElementById('deleteAccountBtn').disabled = !this.checked;
    });

    // Close modals when clicking outside
    window.addEventListener('click', function(event) {
      const deleteDataModal = document.getElementById('deleteDataModal');
      const deleteAccountModal = document.getElementById('deleteAccountModal');
      
      if (event.target === deleteDataModal) {
        closeDeleteDataModal();
      }
      if (event.target === deleteAccountModal) {
        closeDeleteAccountModal();
      }
    });

    // Close modals with Escape key
    document.addEventListener('keydown', function(event) {
      if (event.key === 'Escape') {
        closeDeleteDataModal();
        closeDeleteAccountModal();
      }
    });

    // Add CSS animations
    const style = document.createElement('style');
    style.textContent = `
      @keyframes slideInRight {
        from { transform: translateX(100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
      }
      @keyframes slideOutRight {
        from { transform: translateX(0); opacity: 1; }
        to { transform: translateX(100%); opacity: 0; }
      }
    `;
    document.head.appendChild(style);
  </script>
</body>
</html> 